-- Sanitized, refactored version for style / safety / maintainability
-- NOTE: All gameplay-affecting actions have been replaced with safe placeholders.

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

pcall(function()
    print("THANK YOU FOR USING CUBEWARE !!! :)")
end)

-- Helper: safe access to HumanoidRootPart (non-blocking)
local function getRootPart()
	if not LocalPlayer then return nil end
	local char = LocalPlayer.Character
	if not char then return nil end
	return char:FindFirstChild("HumanoidRootPart") or char.PrimaryPart
end

-- Clean up any existing GUI we created previously
if LocalPlayer and LocalPlayer:FindFirstChild("PlayerGui") then
	local existing = LocalPlayer.PlayerGui:FindFirstChild("ExploitGui")
	if existing then
		existing:Destroy()
	end
end

-- Ordered list of UI entries (use ipairs to preserve order)
local buttons = {
	{ Index = 1; Name = "TP Bronze Rank"; Color = Color3.fromRGB(181, 85, 0); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Bronze Rank clicked — original effect removed for safety.")
	end },

	{ Index = 2; Name = "TP Silver Rank"; Color = Color3.fromRGB(170, 170, 170); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Silver Rank clicked — original effect removed for safety.")
	end },

	{ Index = 3; Name = "TP Gold Rank"; Color = Color3.fromRGB(255, 170, 0); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Gold Rank clicked — original effect removed for safety.")
	end },

	{ Index = 4; Name = "TP Diamond Rank"; Color = Color3.fromRGB(15, 199, 255); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Diamond Rank clicked — original effect removed for safety.")
	end },

	{ Index = 5; Name = "TP Mythic Rank"; Color = Color3.fromRGB(160, 0, 200); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Mythic Rank clicked — original effect removed for safety.")
	end },

	{ Index = 6; Name = "TP Legendary Rank"; Color = Color3.fromRGB(255, 0, 0); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Legendary Rank clicked — original effect removed for safety.")
	end },

	{ Index = 7; Name = "TP Master Rank"; Color = Color3.fromRGB(255, 180, 114); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Master Rank clicked — original effect removed for safety.")
	end },

	{ Index = 8; Name = "TP Pro Rank"; Color = Color3.fromRGB(81, 255, 0); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Pro Rank clicked — original effect removed for safety.")
	end },

	{ Index = 9; Name = "TP Final Rank"; Color = Color3.fromRGB(150, 0, 0); Icon = nil; OnClicked = function()
		print("[SANITIZED] TP Final Rank clicked — original effect removed for safety.")
	end },

	-- Example of a safe toggleable feature pattern: flag only, no direct action
	{ Index = 10; Name = "Infinite Jump (placeholder)"; Color = Color3.fromRGB(255,255,255); OnClicked = function(ctx)
		print("[SANITIZED] Infinite Jump toggle requested (placeholder).")
		-- In a legitimate project, store toggle state here and connect/disconnect a single InputBegan handler as needed
	end },

	-- Sections are displayed as labels in the UI
	{ Section = { SectionIndex = 1; Text = "FUN!"; Color = Color3.fromRGB(255,255,255) } },

	{ Index = 11; Name = "Anti-Void (placeholder)"; Color = Color3.fromRGB(255,255,255); OnClicked = function()
		print("[SANITIZED] Anti-Void requested (placeholder).")
	end },

	{ Index = 12; Name = "Fling Others (placeholder)"; Color = Color3.fromRGB(255,255,255); OnClicked = function()
		print("[SANITIZED] Fling Others requested (placeholder).")
	end },

	{ Index = 13; Name = "Noclip (placeholder)"; Color = Color3.fromRGB(255,255,255); OnClicked = function()
		print("[SANITIZED] Noclip requested (placeholder).")
	end },

	{ Index = 14; Name = "Super Jump (placeholder)"; Color = Color3.fromRGB(255,255,255); OnClicked = function()
		print("[SANITIZED] Super Jump requested (placeholder).")
	end },

	{ Index = 15; Name = "Fake Lag (placeholder)"; Color = Color3.fromRGB(255,255,255); OnClicked = function()
		print("[SANITIZED] Fake Lag requested (placeholder).")
	end },

	{ Section = { SectionIndex = 2; Text = "COMING SOON!"; Color = Color3.fromRGB(0,0,0) } },
}

-- Build sanitized UI
local function createGui()
	if not LocalPlayer then return end
	if not LocalPlayer:FindFirstChild("PlayerGui") then return end

	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "ExploitGui"
	screenGui.IgnoreGuiInset = true
	screenGui.ResetOnSpawn = false
	screenGui.Parent = LocalPlayer.PlayerGui

	local frame = Instance.new("Frame", screenGui)
	frame.Size = UDim2.new(0.5, 0, 0.5, 0)
	frame.Position = UDim2.new(0.5, 0, 0.5, 0)
	frame.AnchorPoint = Vector2.new(0.5, 0.5)
	frame.Name = "MainFrame"
	Instance.new("UICorner", frame)

	local scrollingFrame = Instance.new("ScrollingFrame", frame)
	scrollingFrame.Size = UDim2.new(1, 0, 1, 0)
	scrollingFrame.BackgroundTransparency = 1
	scrollingFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
	scrollingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	scrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y

	local title = Instance.new("TextLabel", scrollingFrame)
	title.Size = UDim2.new(0.9,0,0.25,0)
	title.Position = UDim2.new(0.5,0,0.2,0)
	title.AnchorPoint = Vector2.new(0.5,0.5)
	title.BackgroundTransparency = 1
	title.TextScaled = true
	title.RichText = true
	title.Text = "CubeWare! (sanitized demo)"
	title.Name = "-1_Title"

	local uiList = Instance.new("UIListLayout", scrollingFrame)
	uiList.Padding = UDim.new(0, 10)
	uiList.SortOrder = Enum.SortOrder.LayoutOrder
	uiList.FillDirection = Enum.FillDirection.Horizontal
	uiList.VerticalAlignment = Enum.VerticalAlignment.Center
	uiList.Wraps = true

	-- Create controls in order
	for i, v in ipairs(buttons) do
		if not v.Section then
			local button = Instance.new("TextButton", scrollingFrame)
			button.Size = UDim2.new(0.25, 0, 0.1, 0)
			button.Text = tostring(v.Name or ("Button "..tostring(v.Index or i)))
			button.Name = tostring(v.Index or i) .. "_" .. button.Text
			button.BackgroundColor3 = v.Color or Color3.fromRGB(200,200,200)
			button.TextScaled = true
			if v.Icon then
				local imageLabel = Instance.new("ImageLabel", button)
				imageLabel.Size = UDim2.new(0.16, 0, 0.6, 0)
				imageLabel.Position = UDim2.new(0, 0, 0.4, 0)
				imageLabel.AnchorPoint = Vector2.new(0, 0.5)
				imageLabel.BackgroundTransparency = 1
				imageLabel.Image = tostring(v.Icon)
			end
			button.MouseButton1Down:Connect(function()
				-- Always perform safe guards before using character/parts
				local root = getRootPart()
				-- Pass a small context table if needed
				local ctx = { root = root }
				local ok, err = pcall(function()
					if type(v.OnClicked) == "function" then
						v.OnClicked(ctx)
					end
				end)
				if not ok then
					warn("Button callback error:", err)
				end
			end)
			Instance.new("UICorner", button)
		else
			local textLabel = Instance.new("TextLabel", scrollingFrame)
			textLabel.Name = tostring(v.Section.SectionIndex) .. "_Section"
			textLabel.Text = v.Section.Text
			textLabel.BackgroundTransparency = 1
			textLabel.Size = UDim2.new(0.9, 0, 0.125, 0)
			textLabel.TextScaled = true
			textLabel.TextColor3 = v.Section.Color
		end
	end

	return screenGui
end

local gui = createGui()

-- Single global keybind to toggle GUI (RightShift)
if UserInputService then
	UserInputService.InputBegan:Connect(function(input, gameProcessed)
		if gameProcessed then return end
		if input.KeyCode == Enum.KeyCode.RightShift then
			if gui and gui:IsA("ScreenGui") then
				gui.Enabled = not gui.Enabled
			end
		end
	end)
end

-- Simple startup notification (safe)
if LocalPlayer then
	local root = getRootPart()
	print("SANITIZED: UI loaded. Root part present:", root ~= nil)
end

-- End of sanitized file
